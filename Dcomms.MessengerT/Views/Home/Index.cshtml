<style>
    .localUserButtons {
        margin-left: 5px;
        opacity: 0
    }
    .localUserTitle:hover .localUserButtons {
        opacity: 1;
    }
  
</style>


@{
    ViewData["Title"] = "Dcomms Messenger T";
}

<div class="text-center" >
    <table>
        <tr>
            <td valign="top">
                <script type="text/javascript">
                    $(document).ready(function () {
                        $.getJSON('/XHR/LocalUsersAndContacts', function (r) {
                            $.each(r, function (i0, localUser) {
                                var userDiv = $("<div/>");
                                var userSpan = $('<span/>'); userSpan.attr('class', 'localUserTitle');
                                var userA = $('<a/>');
                                userA.html(localUser.UserAliasID);
                                userA.attr('href', '/LocalUsers/Details/' + localUser.Id);
                                userA.attr('title', 'Your own account ' + localUser.UserAliasID);
                                userSpan.append(userA);

                                var userButtonsSpan = $('<span/>'); userButtonsSpan.attr('class', 'localUserButtons');
                                var deleteButton = $('<a>delete</a>');
                                deleteButton.attr('href', '/LocalUsers/Delete/' + localUser.Id);
                                userButtonsSpan.append(deleteButton);  
                                userSpan.append(userButtonsSpan);
                                userDiv.append(userSpan);
                                
                                var contactsDiv = $("<div style='margin-left: 20px'/>");
                                $.each(localUser.Contacts, function (i1, contact) {
                                    contactsDiv.append("<a href='/Contacts/Details?userId=" + localUser.Id +"&contactId=" + contact.Id + "' title='Details'>" + contact.UserAliasID + "</a><br/>");
                                });
                                contactsDiv.append("<a href='/Contacts/Add/" + localUser.Id + "'>add new contact</a>");
                                userDiv.append(contactsDiv);

                                $('#leftPanel').append(userDiv);
                            });
                        });
                    });
                </script>
                <div style="min-width: 150px;  min-height: 470px; text-align: left; background-color: #EEE; padding: 10px" >                   
                    <div id="leftPanel"></div>
                    <div><a asp-action="Create" asp-controller="LocalUsers">create new account</a></div>
                </div>
            </td>
            <td valign="top">
                <div style="min-width: 300px; text-align: left; padding: 10px">
                    <div style="min-height: 400px;">
                        <div>message1</div>
                        <div>message2</div>
                        <div>message3</div>
                        <div>message4</div>
                        <div>message5</div>
                        <div>message6</div>
                    </div>
                    <table>
                        <tr>
                            <td><textarea rows="2" cols="50" placeholder="Enter your message here"></textarea></td>
                            <td valign="bottom">&emsp;<a href="/">Send</a></td>
                        </tr>                        
                    </table>                    
                </div>                
            </td>
        </tr>
    </table>
</div>
